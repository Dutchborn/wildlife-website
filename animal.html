<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Animal Profile</title>
  <link rel="stylesheet" href="assets/css/main.css">
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, #101820, #283e51);
      color: #f0f0f0;
    }
    .hero {
      position: relative;
      width: 100%;
      height: 400px;
      background-size: cover;
      background-position: center;
      display: flex;
      align-items: flex-end;
      padding: 30px;
    }
    .hero h1 {
      background: rgba(0, 0, 0, 0.6);
      padding: 10px 20px;
      border-radius: 10px;
      font-size: 2.5rem;
      color: #1abc9c;
    }
    .container {
      max-width: 1000px;
      margin: 40px auto;
      background: rgba(255,255,255,0.05);
      border-radius: 12px;
      border: 2px solid black;
      padding: 30px;
      backdrop-filter: blur(8px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    }
    .animal-info em {
      color: #aaa;
      font-size: 1.1rem;
      display: block;
      margin-bottom: 10px;
    }
    .animal-info p {
      font-size: 1.1rem;
      line-height: 1.7;
    }
    .fact-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 30px;
    }
    .fact-box {
      background: rgba(255, 255, 255, 0.07);
      border: 1px solid #444;
      padding: 20px;
      border-radius: 10px;
    }
    .fact-box h3 {
      margin: 0 0 10px;
      font-size: 1.2rem;
      color: #1abc9c;
    }
    .back-link {
      margin-top: 40px;
      display: inline-block;
      text-decoration: none;
      padding: 10px 20px;
      background: #1abc9c;
      color: white;
      border-radius: 6px;
      font-weight: bold;
    }
    .back-link:hover {
      background: #169f85;
    }
    @media (max-width: 768px) {
      .fact-grid {
        grid-template-columns: 1fr;
      }
      .hero {
        height: 250px;
        padding: 20px;
      }
      .hero h1 {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <div class="hero" id="heroSection">
    <h1>Loading...</h1>
  </div>
  <div class="container" id="animalContainer"></div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const animalName = urlParams.get("name");

    const extraFacts = {
      cheetah: {
        lifespan: "10–12 years",
        speed: "112 km/h",
        weight: "21–72 kg",
        height: "67–94 cm",
        diet: "Carnivore",
        habitat: "Savannas, grasslands",
        distribution: "Sub-Saharan Africa"
      },
      lion: {
        lifespan: "8–15 years",
        speed: "80 km/h",
        weight: "120–250 kg",
        height: "1.2 m",
        diet: "Carnivore",
        habitat: "Grasslands, savannas, open woodlands",
        distribution: "Sub-Saharan Africa, India"
      },
      dolphin: {
        lifespan: "20–60 years",
        speed: "55 km/h",
        weight: "150–650 kg",
        height: "2–4 m",
        diet: "Carnivore",
        habitat: "Oceans, seas",
        distribution: "Worldwide"
      }
    };

    async function fetchWikipediaData(name) {
      try {
        const res = await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(name)}`);
        if (!res.ok) throw new Error("Not found");
        return await res.json();
      } catch {
        return null;
      }
    }

    async function displayAnimalProfile() {
      const hero = document.getElementById("heroSection");
      const container = document.getElementById("animalContainer");

      const wiki = await fetchWikipediaData(animalName);
      const facts = extraFacts[animalName?.toLowerCase()] || {};

      if (!wiki) {
        hero.innerHTML = '<h1>Animal Not Found</h1>';
        container.innerHTML = '<p>Sorry, no data available.</p>';
        return;
      }

      hero.style.backgroundImage = `url('${wiki?.thumbnail?.source || 'https://source.unsplash.com/1200x600/?' + animalName}')`;
      hero.innerHTML = `<h1>${wiki.title}</h1>`;

      container.innerHTML = `
        <div class="animal-info">
          <em>${wiki.description || 'No scientific classification available'}</em>
          <p>${wiki.extract || 'No detailed information available.'}</p>
        </div>

        <div class="fact-grid">
          ${Object.entries(facts).map(([key, value]) => `
            <div class="fact-box">
              <h3>${key[0].toUpperCase() + key.slice(1)}</h3>
              <p>${value}</p>
            </div>`).join('')}
        </div>

        <a class="back-link" href="animals.html">← Back to Animal List</a>
      `;
    }

    displayAnimalProfile();
  </script>
</body>
</html>
